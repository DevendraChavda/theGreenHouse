---
import home from ".././img/home.jpg";
import home1 from ".././img/home1.jpeg";
import home2 from ".././img/home2.jpeg";
import { Image } from "astro:assets";
---

<div class="relative w-full max-w-4xl mx-auto">
    <div class="overflow-hidden">
        <div
            id="slider"
            class="flex transition-transform duration-700 ease-in-out"
        >
            <!-- Display the images in a loop -->
            <Image
                src={home}
                alt="Slide 1"
                class="w-full sm:w-full md:w-1/3 lg:w-1/4 flex-shrink-0 object-cover p-4"
            />
            <Image
                src={home1}
                alt="Slide 2"
                class="w-full sm:w-full md:w-1/3 lg:w-1/4 flex-shrink-0 object-cover p-4"
            />
            <Image
                src={home2}
                alt="Slide 3"
                class="w-full sm:w-full md:w-1/3 lg:w-1/4 flex-shrink-0 object-cover p-4"
            />
            <Image
                src={home}
                alt="Slide 4"
                class="w-full sm:w-full md:w-1/3 lg:w-1/4 flex-shrink-0 object-cover p-4"
            />
            <Image
                src={home1}
                alt="Slide 5"
                class="w-full sm:w-full md:w-1/3 lg:w-1/4 flex-shrink-0 object-cover p-4"
            />
            <Image
                src={home2}
                alt="Slide 6"
                class="w-full sm:w-full md:w-1/3 lg:w-1/4 flex-shrink-0 object-cover p-4"
            />
            <Image
                src={home}
                alt="Slide 1"
                class="w-full sm:w-full md:w-1/3 lg:w-1/4 flex-shrink-0 object-cover p-4"
            />
            <Image
                src={home1}
                alt="Slide 2"
                class="w-full sm:w-full md:w-1/3 lg:w-1/4 flex-shrink-0 object-cover p-4"
            />
            <Image
                src={home2}
                alt="Slide 3"
                class="w-full sm:w-full md:w-1/3 lg:w-1/4 flex-shrink-0 object-cover p-4"
            />
            <Image
                src={home}
                alt="Slide 4"
                class="w-full sm:w-full md:w-1/3 lg:w-1/4 flex-shrink-0 object-cover p-4"
            />
        </div>
    </div>
</div>

<script>
    let currentIndex = 0;
    const totalImages = 6; // Original number of images

    function updateSlider() {
        const slider = document.getElementById("slider");
        if (slider) {
            const screenWidth = window.innerWidth;

            let itemsToShow = 4; // default for lg screens

            if (screenWidth < 1024 && screenWidth >= 768) {
                itemsToShow = 3; // md screens
            } else if (screenWidth < 768) {
                itemsToShow = 1; // sm screens
            }

            slider.style.transform = `translateX(-${currentIndex * (100 / itemsToShow)}%)`;
        }
    }

    function nextSlide() {
        const screenWidth = window.innerWidth;
        let itemsToShow = 4; // default for lg screens

        if (screenWidth < 1024 && screenWidth >= 768) {
            itemsToShow = 3; // md screens
        } else if (screenWidth < 768) {
            itemsToShow = 1; // sm screens
        }

        currentIndex++;
        if (currentIndex >= totalImages) {
            currentIndex = 0;
        }
        updateSlider();
    }

    function prevSlide() {
        currentIndex--;
        if (currentIndex < 0) {
            currentIndex = totalImages - 1;
        }
        updateSlider();
    }

    // Auto-rotate every 3 seconds
    setInterval(nextSlide, 3000);

    // Update the slider on window resize to ensure correct display
    window.addEventListener('resize', updateSlider);
</script>
