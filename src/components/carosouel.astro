---
import home from ".././img/home.jpeg";
import home1 from ".././img/home1.jpeg";
import home2 from ".././img/home2.jpeg";
import { Image } from "astro:assets";
---

<div class="relative w-full max-w-4xl mt-10 mx-auto">
    <div>
        <h1 class="text-3xl font-bold">Features</h1>
        <p>
            Restaurant close by Villa For Sale, Shopping close by Villa For Sale
        </p>
    </div>
    <div class="overflow-hidden">
        <div
            id="slider"
            class="flex transition-transform duration-700 ease-in-out pb-5"
        >
            <!-- Display the images in a loop -->
            <div
                class="w-full sm:w-full md:w-1/3 lg:w-1/4 flex-shrink-0 object-cover p-4"
            >
                <Image src={home} alt="Slide 1" class="homeImg" />
            </div>
            <div
                class="w-full sm:w-full md:w-1/3 lg:w-1/4 flex-shrink-0 object-cover p-4"
            >
                <Image src={home1} alt="Slide 2" class="homeImg" />
            </div>
            <div
                class="w-full sm:w-full md:w-1/3 lg:w-1/4 flex-shrink-0 object-cover p-4"
            >
                <Image src={home2} alt="Slide 3" class="homeImg" />
            </div>
            <div
                class="w-full sm:w-full md:w-1/3 lg:w-1/4 flex-shrink-0 object-cover p-4"
            >
                <Image src={home} alt="Slide 4" class="homeImg" />
            </div>
            <div
                class="w-full sm:w-full md:w-1/3 lg:w-1/4 flex-shrink-0 object-cover p-4"
            >
                <Image src={home1} alt="Slide 5" class="homeImg" />
            </div>
            <div
                class="w-full sm:w-full md:w-1/3 lg:w-1/4 flex-shrink-0 object-cover p-4"
            >
                <Image src={home2} alt="Slide 6" class="homeImg" />
            </div>
            <div
                class="w-full sm:w-full md:w-1/3 lg:w-1/4 flex-shrink-0 object-cover p-4"
            >
                <Image src={home} alt="Slide 1" class="homeImg" />
            </div>
            <div
                class="w-full sm:w-full md:w-1/3 lg:w-1/4 flex-shrink-0 object-cover p-4"
            >
                <Image src={home1} alt="Slide 2" class="homeImg" />
            </div>
            <div
                class="w-full sm:w-full md:w-1/3 lg:w-1/4 flex-shrink-0 object-cover p-4"
            >
                <Image src={home2} alt="Slide 3" class="homeImg" />
            </div>
            <div
                class="w-full sm:w-full md:w-1/3 lg:w-1/4 flex-shrink-0 object-cover p-4"
            >
                <Image src={home} alt="Slide 4" class="homeImg" />
            </div>
        </div>
    </div>

    <div id="prevSlide" class="absolute top-2/4 mt-4 left-0 transform -translate-y-1/2 bg-white p-2 rounded-md" onclick="prevSlide()">
        <h1 class="text-2xl">‹</h1>
    </div>
    <div id="nextSlide" class="absolute top-2/4 mt-4 right-0 transform -translate-y-1/2 bg-white p-2 rounded-md" onclick="nextSlide()">
        <h1 class="text-2xl">›</h1>
    </div>
</div>

<script>
    let currentIndex = 0;
    const totalImages = 6; // Original number of images

    function updateSlider() {
        const slider = document.getElementById("slider");
        if (slider) {
            const screenWidth = window.innerWidth;

            let itemsToShow = 4; // default for lg screens

            if (screenWidth < 1024 && screenWidth >= 768) {
                itemsToShow = 3; // md screens
            } else if (screenWidth < 768) {
                itemsToShow = 1; // sm screens
            }

            slider.style.transform = `translateX(-${currentIndex * (100 / itemsToShow)}%)`;
        }
    }

    function nextSlide() {
        const screenWidth = window.innerWidth;
        let itemsToShow = 4; // default for lg screens

        if (screenWidth < 1024 && screenWidth >= 768) {
            itemsToShow = 3; // md screens
        } else if (screenWidth < 768) {
            itemsToShow = 1; // sm screens
        }

        currentIndex++;
        if (currentIndex >= totalImages) {
            currentIndex = 0;
        }
        updateSlider();
    }

    function prevSlide() {
        currentIndex--;
        if (currentIndex < 0) {
            currentIndex = totalImages - 1;
        }
        updateSlider();
    }

    // Auto-rotate every 3 seconds
    setInterval(nextSlide, 3000);

    // Update the slider on window resize to ensure correct display
    window.addEventListener("resize", updateSlider);

    const prevSlideElement = document.getElementById("prevSlide");
    if (prevSlideElement) {
        prevSlideElement.addEventListener("click", prevSlide);
    }

    const nextSlideElement = document.getElementById("nextSlide");
    if (nextSlideElement) {
        nextSlideElement.addEventListener("click", nextSlide);
    }
</script>
